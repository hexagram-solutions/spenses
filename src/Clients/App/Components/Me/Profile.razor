@using Spenses.App.Infrastructure
@inherits Fluxor.Blazor.Web.Components.FluxorComponent

<MudStack AlignItems="AlignItems.Start">
    <MudText Typo="Typo.h5">
        Profile
    </MudText>
    <MudText Typo="Typo.body1">
        Your personal profile. This information is shown to other Spenses users.
    </MudText>
    <MudForm Model="Properties"
             @ref="FormRef"
             Validation="@(_validator.ValidateValue())">

        <MudTextField @bind-Value="Properties.DisplayName"
                      Label="Display name"
                      For="@(() => Properties.DisplayName)"
                      Immediate
                      DebounceInterval="250"
                      Required
                      HelperText="The name shown to other members to identify you."
                      Adornment="@(UpdateSucceeded == true ? Adornment.End : Adornment.None)"
                      AdornmentIcon="@Icons.Material.Filled.Check"
                      AdornmentColor="Color.Success"/>
    </MudForm>

    <MudButton Variant="Variant.Filled"
               Color="Color.Primary"
               OnClick="UpdateInformation"
               Disabled="!UpdateEnabled">
        @if (MeState.Value.CurrentUserUpdating)
        {
            <MudProgressCircular Class="ms-n1"
                                 Size="Size.Small"
                                 Indeterminate="true"/>
        }
        <MudText>Update profile</MudText>
    </MudButton>

</MudStack>

@using Spenses.Shared.Models.Members
@using Spenses.Shared.Validators.Members
@using Spenses.App.Store.Homes
@using Spenses.Shared.Models.Homes
@inherits Fluxor.Blazor.Web.Components.FluxorComponent

<Validate ValidationProperties="@(ValidationProperties.Set.FluentValidator<MemberPropertiesValidator>())"
          OnTransformModel="OnTransformModel" />

<MudGrid>
    <MudItem xs="6">
        <MudTextField @bind-Value="Member.Name"
                      Label="Name"
                      HelperText="This member's name"
                      Placeholder="Quackadilly Blip"
                      Required
                      For="@(() => Member.Name)"/>
    </MudItem>
    <MudItem xs="6">
        <MudTextField @bind-Value="Member.ContactEmail"
                      Label="Contact email"
                      HelperText="Add this member's email address if they should receive email notifications or reminders"
                      Placeholder="quackadilly.blip@auburn.edu"
                      Adornment="Adornment.Start"
                      AdornmentIcon="@Icons.Material.Rounded.AlternateEmail"
                      For="@(() => Member.ContactEmail)"/>
    </MudItem>
    @if (Member is CreateMemberProperties createMemberProperties)
    {
        <MudItem xs="12">
            <MudTooltip Text="Send an invitation to join this home to the member's contact email address.">
                <MudCheckBox @bind-Value="createMemberProperties.ShouldInvite"
                             Label="Invite to home"
                             For="@(() => createMemberProperties.ShouldInvite)"/>
            </MudTooltip>
        </MudItem>
    }
    <MudItem xs="12">
        <MudNumericField @bind-Value="DefaultSplitPercentage"
                         Label="Default split percentage"
                         HelperText="The default ratio to use when splitting expenses with this member."
                         T="decimal"
                         Format="F2"
                         Step="1m"
                         Min="0"
                         Max="100"
                         Adornment="Adornment.End"
                         AdornmentIcon="@Icons.Material.Rounded.Percent"
                         For="@(() => Member.DefaultSplitPercentage)" />
    </MudItem>
    <MudItem xs="12">
        <MemberSplitPercentageMessage @bind-IsValid="IsTotalHomeSplitPercentageValid" />
    </MudItem>
</MudGrid>
